<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>737 Max 8 - Checker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Hello</h1>
    <form onsubmit="othername(); return false">
        <input type="text" id="userInput">
        <input type="submit" value="Submit">
    </form>
    <span id="result">Result</span>

    <script>
        function othername() {
            var input = document.getElementById("userInput").value;
            var valueAPI = 'http://aviation-edge.com/v2/public/flights?key=002a16-94be96&flightIata=' + input + '&limit=1'
            console.log(valueAPI);

            // API CALL
            var request = new XMLHttpRequest()

            request.open('GET', valueAPI, true)
            request.onload = function() {
                // Begin accessing JSON data here
                var data = JSON.parse(this.response)

                if (request.status >= 200 && request.status < 400) {
                    if (data[0] !== undefined && data[0].aircraft.icaoCode !== undefined) {
                        var aircraftModel = data[0].aircraft.icaoCode;
                        var resultBox = document.getElementById("result")
                        console.log(aircraftModel)

                        if (aircraftModel != 'B38M') {
                            resultBox.innerHTML = 'Questo non è un 737 Max 8! ;-)'
                        } else {
                            resultBox.innerHTML = 'Questo è un 737 Max 8... Ci dispiace :-('
                        }

                    } else {
                        alert('No flight detected by this code')
                    }
                } else {
                    console.log('NO DATA ACQUIRED')
                }
            }

            request.send()
        }
    </script>
</body>
</html>